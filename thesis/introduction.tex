% Introduction Chapter

FIXME: TODO REMOVE THIS LIST
\begin{itemize}
\item INTRODUCTION: The Setting - bird eye's view - the challenge to be tackled / thing to be be improved in general
\item INTRODUCTION: Past research done
\item INTRODUCTION: Gap in knowledge/problem not yet solved
\item INTRODUCTION: Purpose and method of this work
\item INTRODUCTION: More detailed description what was done
\item INTRODUCTION: Results acquired
\item INTRODUCTION: Analysis and limitations of the result (Mostly relocate to Conclusions)
\item INTRODUCTION: Value (Mostly relocate to Conclusions)
\end{itemize}


% \section{History}

Loading operating system into computer remotely over network
(``network booting'', ``diskless booting'') has been used for
decades. Network booting can be used to bootstrap operating system
installation (``network installation'') or it could be used for
diskless nodes to load the operating system and run it using disk
provided by server.

Usually network installation systems are built to serve single
organization (e.g. university department or business) to achieve
repeatable and homogeneous installations. For example school's
computer class wants to have identical installations on all machines
and reinstalling the machines should be as simple and as fast as
possible.

Many Linux distributions offer ``netinstall'' where small image is
used to boot the computer into state where rest of the installation
software and packages can be downloaded directly from Internet.

\subsection{Protocols}

Multiple procotols have been developed and used in combination to
allow booting using UDP/IP network. Early published standards include
RARP (``A Reverse Address Resolution Protocol'', RFC903, published
1984\cite{RFC903}) or BOOTP (``Bootstrap Protocol'', RFC951, published
1985\cite{RFC951}) could be used to allow ``a diskless client machine
to discover its own IP address''\cite{RFC951}, TFTP (``Trivial File
Transfer Protocol'', RFC783, published 1981\cite{RFC783}) ``may be
used to move files between machines on different networks implementing
UDP.''\cite{RFC783}.

Later developments include RARP and BOOTP to be superseded by DHCP
(``Dynamic Host Configuration Protocol'', RFC1531, published
1993\cite{RFC1531}) and TFTP superseded by NFS (``Network File
System'', RFC1094, published 1989\cite{RFC1094}) which ``provides
transparent remote access to shared files across
networks.''\cite{RFC1094}


\section{Current state}

Alpine Linux's PXE Boot HOWTO\cite{alpine-pxe-boot-howto} summarises
the current situation:

\begin{quote}
Alpine can be PXE booted starting with Alpine 2.6-rc2. In order to
accomplish this you must complete the following steps:

\begin{itemize}
\item Set up a DHCP server and configure it to support PXE boot.
\item Set up a TFTP server to serve the PXE bootloader.
\item Set up an HTTP server to serve the rest of the boot files.
\item Set up an NFS server from which Alpine can load kernel modules.
\item Configure mkinitfs to generate a PXE-bootable initrd.
\end{itemize}
\end{quote}

As we can see, the whole process still relies on old protocols DHCP,
TFTP, HTTP and NFS developed around 1980--1990. However, these
protocols are not secure and should not be used over Internet.

TFTP, NFS and HTTP protocols can be replaced with HTTPS (HTTP over
TLS) where TLS protocol provides communications security using
cryptocraphy and authentication of one or both communicating parties.


\section{Threats}

Threats can be indentified in all components from hardware to operating
system vulnerabilities. Table~\ref{tab:threats_table} lists some common
known attacks.

\begin{table}[!ht]
  % Add some padding to the table cells:
  \def\arraystretch{1.1}%
  \begin{center}
    \label{tab:threats_table}
    \begin{tabular}{| l | l | l |}
      \hline
      Component   & Role               & Threat(s) \\
      \hline
      HTTP        & File transfer      & malicious files \\
      DNS         & Name service       & spoofing, hijack \\
      NFS         & File transfer      & MITM, malicious files \\
      TFTP        & File transfer      & MITM, malicious files \\
      DHCP        & Zero configuration & spoofing, DNS hijack, TFTP hijack \\
      Peripherals & & backdoors \\
      Hardware    & & backdoors \\
      \hline
    \end{tabular}
    \caption{Roles and threats of various components used in operating
      system installation over network}
  \end{center}
\end{table}

Hardware (e.g.  physical server or laptop) and peripherals
(e.g. displays, keyboards, mice, removable medias) can have backdoored
firmware. The backdoors could have been installed already on factory
or firmware was infected with some malware previously ran on the
machine.

DHCP and DNS protocols could be used to redirect future communications
into malicious services. DHCP is commonly used to assign IP address to
client and give various information (TFTP server's IP address, DNS
servers' IP addresses). Malicious DHCP can take over future TFTP and
DNS communications. DNS has many uses, but commonly it's used to
translate host name into IP address and malicious DNS server could
redirect future communications into malicious services.

TFTP, NFS and HTTP protocols could be used to deliver malicious files
which when executed in target system could compromise the operating
system installation and even firmwares of the hardware the operation
was performed.

DHCP and DNS are still used, but the threats can be detected by other
components (TLS's server authentication, code signing) and
installation process halted if something malicious is happening.
