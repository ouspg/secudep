% Implementation Chapter

Implementation has three main design principles: ease of use, ease of
deploy and security. Deploying new installation infrastructure should
be easy so that it encourages building small, easy to update and easy
to maintain setups. Ease of deployment might also attract developing
new use cases and applications on top of already existing system. With
the implemented solution there should be no need to have monolithic
and centralized installation infrastructure, but designs can shift
more towards personal or per application installation infrastructure.

Installation infrastructure should help end user achieve fresh
installation of operating system and applications as easily, smoothly
and as fast as possible. Most of the decisions required for achieving
installation should be made beforehand and automatized as much as
feasible.

Security is more difficult design principle to tackle. For the
installation infrastructure the concentration should be on selecting
safe defaults and guide user to make safe choices.

This implementation borrows lots of ideas and lessons learned from
boot.foo.sh\cite{boot-foo-sh} and from installation infrastructure
used by Faculty of Information Technology and Electrical Engineering
in University of Oulu. These two systems are also compared to this
implementation in next chapter.

\section{Ease of use}

Setting up installation system using secudep has the following steps:

\begin{enumerate}
  \item Generate file signing keys
  \item Collect HTTP servers' X.509 certificates for public key pinning
  \item Build iPXE bootable media
  \item Write configuration file
  \item Generate contents for deployment
\end{enumerate}

Future work on secudep should simplify these steps even further. File
signing keys could be automatically generated if missing, X.509
certificate collection could be automated based on secudep's config
file. iPXE media build could also be done every time contents for
deployment are generated.

\section{Ease of deploy}

Everything needed for installation system to operate (from server
side) are generated under one directory. This directory can then be
published on HTTPS server. The URL for the installation system files
is configured in secudep's configuration file.

\section{Security}

Secudep tries to make it as easy as possible to use public key pinning
for HTTPS hosts and file signing to verify authenticity of files.

iPXE is configured to require trusted files. File is trusted only
after it's signature is verified successfully. This requirement can't
be turned off once it's turned on.
